<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.6 -->
    <script>
        window.materialVersion = "1.5.6"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0',
            '1.5.2',
            '1.5.5'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">


    <link rel="dns-prefetch" href="https://cdn1.lncld.net"/>




    <link rel="dns-prefetch" href="https://cdn1.lncld.net"/>
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net"/>



    <link rel="dns-prefetch" href="https://hm.baidu.com"/>

    <link rel="dns-prefetch" href="https://www.google-analytics.com"/>



    <link rel="dns-prefetch" href="https://fonts.googleapis.com"/>





    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            Centos搭建Ngrok实现内网穿透 | 
        
        geekrabbit
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" href="/img/favicon.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="">
    <meta name="keywords" content="">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?uVzgA6RLrOm13Ukw8Qgy+A==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-image: url(/img/bg.png);
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?ezyEvm8ST5CGfpA+kFFi1g==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="geekrabbit">
    <meta name="msapplication-starturl" content="https://geekrabbit.top/2019/05/11/Centos搭建Ngrok实现内网穿透/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="geekrabbit">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://geekrabbit.top/2019/05/11/Centos搭建Ngrok实现内网穿透/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Centos搭建Ngrok实现内网穿透 | geekrabbit">
    <meta property="og:image" content="/img/favicon.png">
    <meta property="og:description" content="">
    

    
        <meta property="article:published_time" content="Sat May 11 2019 20:18:08 GMT+0800">
        <meta property="article:modified_time" content="Sat May 18 2019 08:07:04 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://geekrabbit.top/2019/05/11/Centos搭建Ngrok实现内网穿透/index.html" />
    

    <!-- Structured-data for SEO -->
    

    <!-- Analytics -->
    
        <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-167227311-1', 'auto');ga('send', 'pageview');
</script>
    
    
        <script>
    var _hmt = _hmt || [];
    (function() {var hm = document.createElement('script');
    hm.src = 'https://hm.baidu.com/hm.js?2ae9cf47c30c60bc9c47705f606ea2c0';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(hm, s);
    })();
</script>
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span id="MD-burger-id" class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#前言："><span class="post-toc-number">1.</span> <span class="post-toc-text">前言：</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1、准备"><span class="post-toc-number">2.</span> <span class="post-toc-text">1、准备</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2、安装环境"><span class="post-toc-number">3.</span> <span class="post-toc-text">2、安装环境</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3、安装go语言环境"><span class="post-toc-number">4.</span> <span class="post-toc-text">3、安装go语言环境</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4、检查环境安装"><span class="post-toc-number">5.</span> <span class="post-toc-text">4、检查环境安装</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5、在服务器上搭建Ngrok服务"><span class="post-toc-number">6.</span> <span class="post-toc-text">5、在服务器上搭建Ngrok服务</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6、编译生成ngrokd（服务端）"><span class="post-toc-number">7.</span> <span class="post-toc-text">6、编译生成ngrokd（服务端）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7、编译生成ngrok（客户端）"><span class="post-toc-number">8.</span> <span class="post-toc-text">7、编译生成ngrok（客户端）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8、用SSH-Secure-Shell-Client工具"><span class="post-toc-number">9.</span> <span class="post-toc-text">8、用SSH Secure Shell Client工具</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9、在D-ngrok中新建文件，改名为-ngrok-cfg"><span class="post-toc-number">10.</span> <span class="post-toc-text">9、在D:\ngrok中新建文件，改名为 ngrok.cfg</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10、开启远程服务"><span class="post-toc-number">11.</span> <span class="post-toc-text">10、开启远程服务</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#如果有关闭终端，相关程序就被杀死的情况"><span class="post-toc-number">12.</span> <span class="post-toc-text">如果有关闭终端，相关程序就被杀死的情况</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-安装screen"><span class="post-toc-number">13.</span> <span class="post-toc-text">1.安装screen</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-输入screen，然后输入你要运行的命令"><span class="post-toc-number">14.</span> <span class="post-toc-text">2.输入screen，然后输入你要运行的命令</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-ctrl-A-然后按D，screen会关闭"><span class="post-toc-number">15.</span> <span class="post-toc-text">3.ctrl+A 然后按D，screen会关闭</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-查看正在运行的程序"><span class="post-toc-number">16.</span> <span class="post-toc-text">4.查看正在运行的程序</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#11、开启客户机服务"><span class="post-toc-number">17.</span> <span class="post-toc-text">11、开启客户机服务</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#！！！这很重要！！！"><span class="post-toc-number">18.</span> <span class="post-toc-text">！！！这很重要！！！</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                Centos搭建Ngrok实现内网穿透
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>geekrabbit</strong>
        <span>5月 11, 2019</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    
    <!-- Leancloud Views -->
        <a class="post_share-link" href="#">
            <li class="mdl-menu__item">
                <span id="/2019/05/11/Centos搭建Ngrok实现内网穿透/" class="leancloud-views_num" data-flag-title="Centos搭建Ngrok实现内网穿透">
     &nbsp;浏览量
</span>

            </li>
        </a>
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Centos搭建Ngrok实现内网穿透&url=https://geekrabbit.top/2019/05/11/Centos搭建Ngrok实现内网穿透/index.html&pic=https://geekrabbit.top/img/favicon.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Centos搭建Ngrok实现内网穿透&url=https://geekrabbit.top/2019/05/11/Centos搭建Ngrok实现内网穿透/index.html&via=geekrabbit" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://geekrabbit.top/2019/05/11/Centos搭建Ngrok实现内网穿透/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://geekrabbit.top/2019/05/11/Centos搭建Ngrok实现内网穿透/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h3 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h3><p>原来一直用的别人搭建的内网穿透，因为是免费的，所以网速，稳定性都特别差，所以打算自己搭建一个属于自己的内网穿透</p>
<h3 id="1、准备"><a href="#1、准备" class="headerlink" title="1、准备"></a>1、准备</h3><p>一台云服务器,一个域名,并且域名泛解析解析到云服务器,此处我用的服务器的操作系统为CentOS7(amd64)</p>
<h3 id="2、安装环境"><a href="#2、安装环境" class="headerlink" title="2、安装环境"></a>2、安装环境</h3><p>安装gcc和git（用于下载ngrok源码）</p>
<pre><code class="bash">yum install gcc -y
yum install git -y
</code></pre>
<h3 id="3、安装go语言环境"><a href="#3、安装go语言环境" class="headerlink" title="3、安装go语言环境"></a>3、安装go语言环境</h3><pre><code>yum install -y mercurial git bzr subversion golang golang-pkg-windows-amd64 golang-pkg-windows-386
</code></pre><h3 id="4、检查环境安装"><a href="#4、检查环境安装" class="headerlink" title="4、检查环境安装"></a>4、检查环境安装</h3><pre><code>git --version //( &gt;= 1.7 )
go version
</code></pre><h3 id="5、在服务器上搭建Ngrok服务"><a href="#5、在服务器上搭建Ngrok服务" class="headerlink" title="5、在服务器上搭建Ngrok服务"></a>5、在服务器上搭建Ngrok服务</h3><p>5.1.下载ngrok源码</p>
<pre><code>git clone https://github.com/inconshreveable/ngrok.git
</code></pre><p>5.2.生成证书</p>
<pre><code>cd ngrok
</code></pre><p>abc.com这里修改为自己的域名,命令一条一条复制即可</p>
<pre><code>export NGROK_DOMAIN=&quot;abc.com&quot;

openssl genrsa -out rootCA.key 2048

openssl req -x509 -new -nodes -key rootCA.key -subj &quot;/CN=$NGROK_DOMAIN&quot; -days 5000 -out rootCA.pem

openssl genrsa -out device.key 2048

openssl req -new -key device.key -subj &quot;/CN=$NGROK_DOMAIN&quot; -out device.csr

openssl x509 -req -in device.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out device.crt -days 5000
</code></pre><p>5.3.将新生成的证书替换，执行下面命令后 “y” 回车 一行一行执行代码！</p>
<pre><code>cp rootCA.pem assets/client/tls/ngrokroot.crt

cp device.crt assets/server/tls/snakeoil.crt

cp device.key assets/server/tls/snakeoil.key
</code></pre><h3 id="6、编译生成ngrokd（服务端）"><a href="#6、编译生成ngrokd（服务端）" class="headerlink" title="6、编译生成ngrokd（服务端）"></a>6、编译生成ngrokd（服务端）</h3><pre><code>GOOS=linux GOARCH=amd64 make release-server
</code></pre><p>​ 生成在~/ngrok/bin/目录中</p>
<h3 id="7、编译生成ngrok（客户端）"><a href="#7、编译生成ngrok（客户端）" class="headerlink" title="7、编译生成ngrok（客户端）"></a>7、编译生成ngrok（客户端）</h3><pre><code>GOOS=windows GOARCH=amd64 make release-client
</code></pre><p>​ 生成在~/ngrok/bin/windows_amd64/目录中</p>
<h3 id="8、用SSH-Secure-Shell-Client工具"><a href="#8、用SSH-Secure-Shell-Client工具" class="headerlink" title="8、用SSH Secure Shell Client工具"></a>8、用SSH Secure Shell Client工具</h3><p>将~/ngrok/bin/windows_amd64/里的文件下载到本地Windows下，如D:\ngrok</p>
<h3 id="9、在D-ngrok中新建文件，改名为-ngrok-cfg"><a href="#9、在D-ngrok中新建文件，改名为-ngrok-cfg" class="headerlink" title="9、在D:\ngrok中新建文件，改名为 ngrok.cfg"></a>9、在D:\ngrok中新建文件，改名为 ngrok.cfg</h3><p>文件中输入：</p>
<pre><code>server_addr: &quot;abc.com:8083&quot;
trust_host_root_certs: false
tunnels:
  http:
    subdomain: &quot;www&quot;
    proto:
      http: &quot;80&quot;

  https:
    subdomain: &quot;www&quot;
    proto:
      https: &quot;443&quot;

  ssh:
    remote_port: 2222
    proto:
      tcp: &quot;22&quot;

  mstsc:
        remote_port: 52222      
        proto:
         tcp: &quot;192.168.0.107:3389&quot;
</code></pre><p>以上 8083 80 443 与 远程开启的端口一致，</p>
<h3 id="10、开启远程服务"><a href="#10、开启远程服务" class="headerlink" title="10、开启远程服务"></a>10、开启远程服务</h3><p>在ngrok目录中</p>
<pre><code>cd ngrok

sudo ./bin/ngrokd -domain=&quot;abc.com&quot;  -httpAddr=&quot;:80&quot; -httpsAddr=&quot;:443&quot; -tunnelAddr=&quot;:8083&quot; &amp;
</code></pre><p>这里的端口号与config文件对应，视情况而定</p>
<pre><code>[16:05:23 CST 2018/01/09][INFO] (ngrok/log.(*PrefixLogger).Info:83) [registry][tun] No affinity cache specified

[16:05:23 CST 2018/01/09][INFO] (ngrok/log.Info:112) Listening for public http connections on [::]:80

[16:05:23 CST 2018/01/09][INFO] (ngrok/log.Info:112) Listening for public https connections on [::]:443

[16:05:23 CST 2018/01/09][INFO] (ngrok/log.Info:112) Listening for control and proxy connections on [::]:8083

[16:05:23 CST 2018/01/09][INFO] (ngrok/log.(*PrefixLogger).Info:83) [metrics] Reporting every 30 seconds
显示此为成功开启
</code></pre><h3 id="如果有关闭终端，相关程序就被杀死的情况"><a href="#如果有关闭终端，相关程序就被杀死的情况" class="headerlink" title="如果有关闭终端，相关程序就被杀死的情况"></a>如果有关闭终端，相关程序就被杀死的情况</h3><h3 id="1-安装screen"><a href="#1-安装screen" class="headerlink" title="1.安装screen"></a>1.安装screen</h3><pre><code>yum install -y screen
</code></pre><h3 id="2-输入screen，然后输入你要运行的命令"><a href="#2-输入screen，然后输入你要运行的命令" class="headerlink" title="2.输入screen，然后输入你要运行的命令"></a>2.输入screen，然后输入你要运行的命令</h3><h3 id="3-ctrl-A-然后按D，screen会关闭"><a href="#3-ctrl-A-然后按D，screen会关闭" class="headerlink" title="3.ctrl+A 然后按D，screen会关闭"></a>3.ctrl+A 然后按D，screen会关闭</h3><h3 id="4-查看正在运行的程序"><a href="#4-查看正在运行的程序" class="headerlink" title="4.查看正在运行的程序"></a>4.查看正在运行的程序</h3><pre><code>screen -ls
</code></pre><p>现在关闭终端，在screen中的程序会继续后台运行</p>
<h3 id="11、开启客户机服务"><a href="#11、开启客户机服务" class="headerlink" title="11、开启客户机服务"></a>11、开启客户机服务</h3><p>在Windows中D:\ngrok新建文件 改名 start.bat</p>
<p>输入：</p>
<p>ngrok -config=ngrok.cfg start http https ssh mstsc</p>
<p>直接双击运行<br><img src="https://i.loli.net/2019/05/11/5cd6c21b6d2ce.png" alt=""></p>
<p>表示成功，</p>
<p>不成功的话看看自己的开启端口是否与config文件中对应</p>
<p>或查看服务器的远程端口是否在安全组中打开</p>
<h3 id="！！！这很重要！！！"><a href="#！！！这很重要！！！" class="headerlink" title="！！！这很重要！！！"></a>！！！这很重要！！！</h3><p>关于ngrok在远程开机自启问题</p>
<p>服务器后台开机启动运行ngrok服务端：</p>
<p>1.以下内容新建一个 start.sh 文件 放到 ~/ngrok/start.sh</p>
<pre><code>~/ngrok/bin/ngrokd -domain=&quot;abc.com&quot;  -httpAddr=&quot;:80&quot; -httpsAddr=&quot;:443&quot; -tunnelAddr=&quot;:8083&quot; &amp;
</code></pre><p>给权限：</p>
<pre><code>chmod 755 ~/ngrok/start.sh

</code></pre><p>2.新建ngrok启动脚本文件</p>
<pre><code>sudo vi /etc/init.d/ngrok
</code></pre><p>文件内容：</p>
<pre><code>#!/bin/sh  

#chkconfig:2345 70 30  

#description:ngrok

BEGIN INIT INFO

Provides:          ngrok

Required-Start:

Required-Stop:

Default-Start:    2 3 4 5

Default-Stop:      0 1 6

Short-Description: Start or stop the ngrok Proxy.

END INIT INFO

ngrok_path=~/ngrok/

case &quot;$1&quot; in

    start)

            echo &quot;start ngrok service..&quot;

            sh ${ngrok_path}/start.sh

            ;;

  *)

    exit 1

    ;;

esac
</code></pre><p>提示 : 运行sudo vi /etc/init.d/ngrok之后 ！！直接按键盘 I 进入编辑模式，然后复制下面内容 然后 “esc” “:” “wq” “!” “回车” 意思是保存退出！<br>3.ngrok脚本文件 给权限</p>
<pre><code>cd /etc/init.d

chmod 755 ngrok
</code></pre><p>4.添加启动服务 ngrok</p>
<pre><code>chkconfig --add ngrok
</code></pre><p>5.测试服务是否能启动成功</p>
<pre><code>service ngrok start
</code></pre><p>6.查看自启动的服务 是否有 nrgok ！！</p>
<pre><code>chkconfig  
</code></pre><p>执行这个代码如果出现后面的就OK了！！ ngrok 0:off 1:off 2:on 3:on 4:on 5:on 6:off</p>
<p>服务器ngrok的服务端开机自动启动成功了！！<br>7.在此附上python版源码</p>
<pre><code class="bash">#!/usr/bin/env python
# -*- coding: UTF-8 -*-
# 建议Python 2.7.9 或 Python 3.4.2 以上运行
# 项目地址: https://github.com/hauntek/python-ngrok
# Version: v1.5
import socket
import ssl
import json
import struct
import random
import sys
import time
import logging
import threading

host = &#39;tunnel.qydev.com&#39; # Ngrok服务器地址
port = 4443 # 端口
bufsize = 1024 # 吞吐量

Tunnels = list() # 全局渠道赋值
body = dict()
body[&#39;protocol&#39;] = &#39;http&#39;
body[&#39;hostname&#39;] = &#39;www.xxx.com&#39;
body[&#39;subdomain&#39;] = &#39;&#39;
body[&#39;rport&#39;] = 0
body[&#39;lhost&#39;] = &#39;127.0.0.1&#39;
body[&#39;lport&#39;] = 80
Tunnels.append(body) # 加入渠道队列

body = dict()
body[&#39;protocol&#39;] = &#39;http&#39;
body[&#39;hostname&#39;] = &#39;&#39;
body[&#39;subdomain&#39;] = &#39;xxx&#39;
body[&#39;rport&#39;] = 0
body[&#39;lhost&#39;] = &#39;127.0.0.1&#39;
body[&#39;lport&#39;] = 80
Tunnels.append(body) # 加入渠道队列

body = dict()
body[&#39;protocol&#39;] = &#39;tcp&#39;
body[&#39;hostname&#39;] = &#39;&#39;
body[&#39;subdomain&#39;] = &#39;&#39;
body[&#39;rport&#39;] = 55499
body[&#39;lhost&#39;] = &#39;127.0.0.1&#39;
body[&#39;lport&#39;] = 22
Tunnels.append(body) # 加入渠道队列

reqIdaddr = dict()
localaddr = dict()

# 读取配置文件
if len(sys.argv) &gt;= 2:
    file_object = open(sys.argv[1])
    try:
        all_the_text = file_object.read()
        config_object = json.loads(all_the_text)
        host = config_object[&quot;server&quot;][&quot;host&quot;] # Ngrok服务器地址
        port = int(config_object[&quot;server&quot;][&quot;port&quot;]) # 端口
        bufsize = int(config_object[&quot;server&quot;][&quot;bufsize&quot;]) # 吞吐量
        Tunnels = list() # 重置渠道赋值
        for Tunnel in config_object[&quot;client&quot;]:
            body = dict()
            body[&#39;protocol&#39;] = Tunnel[&quot;protocol&quot;]
            body[&#39;hostname&#39;] = Tunnel[&quot;hostname&quot;]
            body[&#39;subdomain&#39;] = Tunnel[&quot;subdomain&quot;]
            body[&#39;rport&#39;] = int(Tunnel[&quot;rport&quot;])
            body[&#39;lhost&#39;] = Tunnel[&quot;lhost&quot;]
            body[&#39;lport&#39;] = int(Tunnel[&quot;lport&quot;])
            Tunnels.append(body) # 加入渠道队列
        del all_the_text
        del config_object
    except Exception:
        # logger = logging.getLogger(&#39;%s&#39; % &#39;config&#39;)
        # logger.error(&#39;The configuration file read failed&#39;)
        # exit(1)
        pass
    finally:
        file_object.close()

mainsocket = 0

ClientId = &#39;&#39;
pingtime = 0

def getloacladdr(Tunnels, Url):
    protocol = Url[0:Url.find(&#39;:&#39;)]
    hostname = Url[Url.find(&#39;//&#39;) + 2:]
    subdomain = hostname[0:hostname.find(&#39;.&#39;)]
    rport = Url[Url.rfind(&#39;:&#39;) + 1:]

    for tunnelinfo in Tunnels:
        if tunnelinfo.get(&#39;protocol&#39;) == protocol:
            if tunnelinfo.get(&#39;protocol&#39;) in [&#39;http&#39;, &#39;https&#39;]:
                if tunnelinfo.get(&#39;hostname&#39;) == hostname:
                    return tunnelinfo
                if tunnelinfo.get(&#39;subdomain&#39;) == subdomain:
                    return tunnelinfo
            if tunnelinfo.get(&#39;protocol&#39;) == &#39;tcp&#39;:
                if tunnelinfo.get(&#39;rport&#39;) == int(rport):
                    return tunnelinfo

    return dict()

def dnsopen(host):
    try:
        ip = socket.gethostbyname(host)
    except socket.error:
        return False

    return ip

def connectremote(host, port):
    try:
        host = socket.gethostbyname(host)
        client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        ssl_client = ssl.wrap_socket(client, ssl_version=ssl.PROTOCOL_SSLv23)
        ssl_client.connect((host, port))
        ssl_client.setblocking(1)
        logger = logging.getLogger(&#39;%s:%d&#39; % (&#39;Conn&#39;, ssl_client.fileno()))
        logger.debug(&#39;New connection to: %s:%d&#39; % (host, port))
    except socket.error:
        return False

    return ssl_client

def connectlocal(localhost, localport):
    try:
        localhost = socket.gethostbyname(localhost)
        client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        client.connect((localhost, localport))
        client.setblocking(1)
        logger = logging.getLogger(&#39;%s:%d&#39; % (&#39;Conn&#39;, client.fileno()))
        logger.debug(&#39;New connection to: %s:%d&#39; % (localhost, localport))
    except socket.error:
        return False

    return client

def NgrokAuth():
    Payload = dict()
    Payload[&#39;ClientId&#39;] = &#39;&#39;
    Payload[&#39;OS&#39;] = &#39;darwin&#39;
    Payload[&#39;Arch&#39;] = &#39;amd64&#39;
    Payload[&#39;Version&#39;] = &#39;2&#39;
    Payload[&#39;MmVersion&#39;] = &#39;1.7&#39;
    Payload[&#39;User&#39;] = &#39;user&#39;
    Payload[&#39;Password&#39;] = &#39;&#39;
    body = dict()
    body[&#39;Type&#39;] = &#39;Auth&#39;
    body[&#39;Payload&#39;] = Payload
    buffer = json.dumps(body)
    return(buffer)

def ReqTunnel(ReqId, Protocol, Hostname, Subdomain, RemotePort):
    Payload = dict()
    Payload[&#39;ReqId&#39;] = ReqId
    Payload[&#39;Protocol&#39;] = Protocol
    Payload[&#39;Hostname&#39;] = Hostname
    Payload[&#39;Subdomain&#39;] = Subdomain
    Payload[&#39;HttpAuth&#39;] = &#39;&#39;
    Payload[&#39;RemotePort&#39;] = RemotePort
    body = dict()
    body[&#39;Type&#39;] = &#39;ReqTunnel&#39;
    body[&#39;Payload&#39;] = Payload
    buffer = json.dumps(body)
    return(buffer)

def RegProxy(ClientId):
    Payload = dict()
    Payload[&#39;ClientId&#39;] = ClientId
    body = dict()
    body[&#39;Type&#39;] = &#39;RegProxy&#39;
    body[&#39;Payload&#39;] = Payload
    buffer = json.dumps(body)
    return(buffer)

def Ping():
    Payload = dict()
    body = dict()
    body[&#39;Type&#39;] = &#39;Ping&#39;
    body[&#39;Payload&#39;] = Payload
    buffer = json.dumps(body)
    return(buffer)

def lentobyte(len):
    return struct.pack(&#39; 0:
                if not recvbuf:
                    recvbuf = recvbut
                else:
                    recvbuf += recvbut

            if type == 1 or (type == 2 and linkstate == 1):
                lenbyte = tolen(recvbuf[0:8])
                if len(recvbuf) &gt;= (8 + lenbyte):
                    buf = recvbuf[8:lenbyte + 8].decode(&#39;utf-8&#39;)
                    logger = logging.getLogger(&#39;%s:%d&#39; % (&#39;Recv&#39;, sock.fileno()))
                    logger.debug(&#39;Reading message with length: %d&#39; % len(buf))
                    logger.debug(&#39;Read message: %s&#39; % buf)
                    js = json.loads(buf)
                    if type == 1:
                        if js[&#39;Type&#39;] == &#39;ReqProxy&#39;:
                            newsock = connectremote(host, port)
                            if newsock:
                                thread = threading.Thread(target = HKClient, args = (newsock, 0, 2))
                                thread.setDaemon(True)
                                thread.start()
                        if js[&#39;Type&#39;] == &#39;AuthResp&#39;:
                            ClientId = js[&#39;Payload&#39;][&#39;ClientId&#39;]
                            logger = logging.getLogger(&#39;%s&#39; % &#39;client&#39;)
                            logger.info(&#39;Authenticated with server, client id: %s&#39; % ClientId)
                            sendpack(sock, Ping())
                            pingtime = time.time()
                            for info in Tunnels:
                                reqid = getRandChar(8)
                                sendpack(sock, ReqTunnel(reqid, info[&#39;protocol&#39;], info[&#39;hostname&#39;], info[&#39;subdomain&#39;], info[&#39;rport&#39;]))
                                reqIdaddr[reqid] = (info[&#39;lhost&#39;], info[&#39;lport&#39;])
                        if js[&#39;Type&#39;] == &#39;NewTunnel&#39;:
                            if js[&#39;Payload&#39;][&#39;Error&#39;] != &#39;&#39;:
                                logger = logging.getLogger(&#39;%s&#39; % &#39;client&#39;)
                                logger.error(&#39;Server failed to allocate tunnel: %s&#39; % js[&#39;Payload&#39;][&#39;Error&#39;])
                                time.sleep(30)
                            else:
                                logger = logging.getLogger(&#39;%s&#39; % &#39;client&#39;)
                                logger.info(&#39;Tunnel established at %s&#39; % js[&#39;Payload&#39;][&#39;Url&#39;])
                                localaddr[js[&#39;Payload&#39;][&#39;Url&#39;]] = reqIdaddr[js[&#39;Payload&#39;][&#39;ReqId&#39;]]
                    if type == 2:
                        if js[&#39;Type&#39;] == &#39;StartProxy&#39;:
                            localhost, localport = localaddr[js[&#39;Payload&#39;][&#39;Url&#39;]]

                            newsock = connectlocal(localhost, localport)
                            if newsock:
                                thread = threading.Thread(target = HKClient, args = (newsock, 0, 3, sock))
                                thread.setDaemon(True)
                                thread.start()
                                tosock = newsock
                                linkstate = 2
                            else:
                                body = &#39;Tunnel %s unavailableUnable to initiate connection to %s. This port is not yet available for web server.&#39;
                                html = body % (js[&#39;Payload&#39;][&#39;Url&#39;], localhost + &#39;:&#39; + str(localport))
                                header = &quot;HTTP/1.0 502 Bad Gateway&quot; + &quot;\r\n&quot;
                                header += &quot;Content-Type: text/html&quot; + &quot;\r\n&quot;
                                header += &quot;Content-Length: %d&quot; + &quot;\r\n&quot;
                                header += &quot;\r\n&quot; + &quot;%s&quot;
                                buf = header % (len(html.encode(&#39;utf-8&#39;)), html)
                                sendbuf(sock, buf.encode(&#39;utf-8&#39;))

                    if len(recvbuf) == (8 + lenbyte):
                        recvbuf = bytes()
                    else:
                        recvbuf = recvbuf[8 + lenbyte:]

            if type == 3 or (type == 2 and linkstate == 2):
                sendbuf(tosock, recvbuf)
                recvbuf = bytes()

        except socket.error:
            break

    if type == 1:
        mainsocket = False
    if type == 3:
        try:
            tosock.shutdown(socket.SHUT_WR)
        except socket.error:
            tosock.close()

    logger = logging.getLogger(&#39;%s:%d&#39; % (&#39;Close&#39;, sock.fileno()))
    logger.debug(&#39;Closing&#39;)
    sock.close()

# 客户端程序初始化
if __name__ == &#39;__main__&#39;:
    logging.basicConfig(level=logging.DEBUG, format=&#39;[%(asctime)s] [%(levelname)s] [%(name)s] %(message)s&#39;, datefmt=&#39;%Y/%m/%d %H:%M:%S&#39;)
    logger = logging.getLogger(&#39;%s&#39; % &#39;client&#39;)
    logger.info(&#39;python-ngrok v1.5&#39;)
    while True:
        try:
            # 检测控制连接是否连接.
            if mainsocket == False:
                ip = dnsopen(host)
                if ip == False:
                    logger = logging.getLogger(&#39;%s&#39; % &#39;client&#39;)
                    logger.info(&#39;update dns&#39;)
                    time.sleep(10)
                    continue
                mainsocket = connectremote(ip, port)
                if mainsocket == False:
                    logger = logging.getLogger(&#39;%s&#39; % &#39;client&#39;)
                    logger.info(&#39;connect failed...!&#39;)
                    time.sleep(10)
                    continue
                thread = threading.Thread(target = HKClient, args = (mainsocket, 0, 1))
                thread.setDaemon(True)
                thread.start()

            # 发送心跳
            if pingtime + 20 &lt; time.time() and pingtime != 0:
                sendpack(mainsocket, Ping())
                pingtime = time.time()

            time.sleep(1)

        except socket.error:
            pingtime = 0
        except KeyboardInterrupt:
            sys.exit()
</code></pre>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <div id="comment" style='padding:10px;' class="vcomment"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script>
    var GUEST_INFO = ['nick','mail','link'];
    var guest_info = 'nick,mail,link'.split(',').filter(function(item){
        return GUEST_INFO.indexOf(item) > -1
    });
    var notify = 'true' === 'true';
    var verify = 'true' === 'true';
    new Valine({
        el: '.vcomment',
        notify: notify,
        verify: verify,
        appId: "NvltAmEE25GmNtO1gatQMsV6-gzGzoHsz",
        appKey: "DxUJdLt60zrNdFfu5F46fBTV",
        placeholder: "ヾﾉ≧∀≦)o来啊，快活啊!",
        pageSize:'10',
        avatar:'identicon',
        lang:'zh-cn',
        guest_info: guest_info
    });
</script>


                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2019/05/17/中兴光猫修改mac和sn/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2019/05/11/linux 远程连接ssh提示IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY解决/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="geekrabbit's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        1347896323@qq.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="#" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2020/07/">七月 2020<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/06/">六月 2020<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/05/">五月 2020<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/03/">三月 2020<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/12/">十二月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/10/">十月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/08/">八月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/07/">七月 2019<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/06/">六月 2019<span class="sidebar_archives-count">10</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/05/">五月 2019<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/04/">四月 2019<span class="sidebar_archives-count">4</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/C语言学习/">C语言学习<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/DDOS攻防学习/">DDOS攻防学习<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/MySQL数据库学习/">MySQL数据库学习<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/categories/kali/">kali<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/linux学习/">linux学习<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/linux遇到的问题/">linux遇到的问题<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/学习笔记/">学习笔记<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/搞机笔记/">搞机笔记<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/服务器/">服务器<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/硬件/">硬件<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/遇到的问题和解决方法/">遇到的问题和解决方法<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/about" title="关于我">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                关于我
            </a>
        </li>
        
    
        <li>
            <a href="/links" title="友链">
                
                    <i class="material-icons sidebar-material-icons">link</i>
                
                友链
            </a>
        </li>
        
    
        <li>
            <a href="/tags" title="标签云">
                
                    <i class="material-icons sidebar-material-icons">date_range</i>
                
                标签云
            </a>
        </li>
        
    
        <li>
            <a href="/server" title="服务器">
                
                    <i class="material-icons sidebar-material-icons">cloud_circle</i>
                
                服务器
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    

    <!-- V2EX -->
    

    <!-- Segmentfault -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;<span year></span>&nbsp;geekrabbit
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?wgjW/HuQG9JDgvPDPoRAng==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?LT4t6iE6m8TO1BLGGiNJqA==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>





    <!-- Leancloud -->
    <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
    <script>
        AV.initialize('nDFDyGrpj3ivbGEj1JGXBtxJ-gzGzoHsz', 'W84e19bhKwQb2WxtE8C8VlLd');
    </script>
    <script type="text/ls-javascript" id="leancloud-views-script">
    function showTime(Counter) {
        var query = new AV.Query(Counter);
        $('.leancloud-views_num').each(function() {
            var url = $(this).attr('id').trim();
            query.equalTo('url', url);
            query.find({
                success: function(results) {
                    if (results.length === 0) {
                        var content = '0 ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                        return;
                    }
                    for (var i = 0; i < results.length; i++) {
                        var object = results[i];
                        var content = object.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    }
                },
                error: function(object, error) {
                    console.log('Error: ' + error.code + ' ' + error.message);
                }
            });
        });
    }

    function addCount(Counter) {
      var Counter = AV.Object.extend('Counter');
      url = $('.leancloud-views_num').attr('id').trim();
      title = $('.leancloud-views_num').attr('data-flag-title').trim();
      var query = new AV.Query(Counter);
      query.equalTo('url', url);
      query.find({
          success: function(results) {
            if (results.length > 0) {
                var counter = results[0];
                counter.fetchWhenSave(true);
                counter.increment('time');
                counter.save(null, {
                    success: function(counter) {
                        var content =  counter.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    },
                    error: function(counter, error) {
                        console.log('Failed to save Visitor num, with error message: ' + error.message);
                    }
                });
            } else {
              var newcounter = new Counter();
              newcounter.set('title', title);
              newcounter.set('url', url);
              newcounter.set('time', 1);
              newcounter.save(null, {
                  success: function(newcounter) {
                      console.log('newcounter.get(\'time\')='+newcounter.get('time'));
                      var content = newcounter.get('time') + ' ' + $(document.getElementById(url)).text();
                      $(document.getElementById(url)).text(content);
                  },
                  error: function(newcounter, error) {
                      console.log('Failed to create');
                  }
              });
            }
        },
        error: function(error) {
            console.log('Error:' + error.code + ' ' + error.message);
        }
      });
    }
    $(function() {
        var Counter = AV.Object.extend('Counter');
        if ($('.leancloud-views_num').length === 1) {
            addCount(Counter);
        } else if ($('.post-title-link').length > 1) {
            showTime(Counter);
        }
    });
</script>






   





<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->


    
        <script>lsloader.load("hanabi","/js/hanabi-browser-bundle.js?5+2z7ZZmFuZK5IcimlZbxw==", true)</script>
    


<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
    
        
        
        HanabiBrowser.start('pre code',false);
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    var copyrightNow = new Date().getFullYear();
    var textContent = document.querySelector('span[year]')

    copyrightSince = 0000;
    if (copyrightSince === copyrightNow||copyrightSince === 0000) {
        textContent.textContent = copyrightNow
    } else {
        textContent.textContent = copyrightSince + ' - ' + copyrightNow
    }

    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.6 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"left","width":200,"height":200},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
    
</html>
